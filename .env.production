# Production Environment Configuration for LIS System
# Copy this file to .env and update all values for production deployment

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_VERSION=1.0.0
APP_ENVIRONMENT=production
SITE_NAME=Laboratory Information System
SITE_DOMAIN=your-domain.com

# =============================================================================
# DJANGO SETTINGS
# =============================================================================
DEBUG=False
SECRET_KEY=your-super-secret-production-key-change-this-immediately
ALLOWED_HOSTS=your-domain.com,www.your-domain.com,localhost,127.0.0.1

# =============================================================================
# DATABASE SETTINGS
# =============================================================================
DB_NAME=lis_production
DB_USER=lis_prod_user
DB_PASSWORD=your-very-secure-database-password
DB_HOST=localhost
DB_PORT=5432

# =============================================================================
# REDIS SETTINGS
# =============================================================================
REDIS_URL=redis://:your-redis-password@localhost:6379/0
REDIS_PASSWORD=your-very-secure-redis-password

# =============================================================================
# ELASTICSEARCH SETTINGS
# =============================================================================
ELASTIC_PASSWORD=your-very-secure-elasticsearch-password

# =============================================================================
# CORS SETTINGS
# =============================================================================
CORS_ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com

# =============================================================================
# EMAIL SETTINGS
# =============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.your-provider.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@your-domain.com
EMAIL_HOST_PASSWORD=your-email-password
DEFAULT_FROM_EMAIL=noreply@your-domain.com

# =============================================================================
# FRONTEND SETTINGS
# =============================================================================
FRONTEND_API_URL=https://your-domain.com/api/v1
FRONTEND_WS_URL=wss://your-domain.com/ws

# =============================================================================
# MIRTH CONNECT SETTINGS
# =============================================================================
MIRTH_DB_USER=mirth_user
MIRTH_DB_PASSWORD=your-mirth-database-password
MIRTH_ADMIN_PASSWORD=your-mirth-admin-password
MIRTH_LICENSE_KEY=your-mirth-license-key
MIRTH_USERNAME=admin
MIRTH_PASSWORD=your-mirth-admin-password

# =============================================================================
# MONITORING SETTINGS
# =============================================================================
GRAFANA_ADMIN_PASSWORD=your-grafana-admin-password
GRAFANA_ROOT_URL=https://your-domain.com:3001
GRAFANA_FROM_EMAIL=grafana@your-domain.com

# =============================================================================
# ALERTING SETTINGS
# =============================================================================
ALERTMANAGER_EXTERNAL_URL=https://your-domain.com:9093

# =============================================================================
# SMTP SETTINGS (for Grafana alerts)
# =============================================================================
SMTP_HOST=smtp.your-provider.com
SMTP_USER=your-email@your-domain.com
SMTP_PASSWORD=your-email-password

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
CELERY_WORKER_CONCURRENCY=4
CELERY_MAX_TASKS_PER_CHILD=1000
REDIS_MAX_MEMORY=2gb
POSTGRES_MAX_CONNECTIONS=200
ELASTICSEARCH_HEAP_SIZE=1g

# =============================================================================
# BACKUP SETTINGS
# =============================================================================
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key

# =============================================================================
# LOGGING SETTINGS
# =============================================================================
LOG_LEVEL=INFO
LOG_RETENTION_DAYS=90
SENTRY_DSN=your-sentry-dsn-if-using

# =============================================================================
# INTEGRATION SETTINGS
# =============================================================================
HL7_FHIR_ENDPOINT=https://your-fhir-server.com
HL7_FHIR_CLIENT_ID=your-fhir-client-id
HL7_FHIR_CLIENT_SECRET=your-fhir-client-secret

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
LABORATORY_INTERFACE_URL=https://your-lab-interface.com
LABORATORY_API_KEY=your-lab-api-key
REFERENCE_LAB_URL=https://your-reference-lab.com
REFERENCE_LAB_API_KEY=your-reference-lab-api-key

# =============================================================================
# COMPLIANCE SETTINGS
# =============================================================================
HIPAA_COMPLIANCE_ENABLED=True
GDPR_COMPLIANCE_ENABLED=True
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years
DATA_ENCRYPTION_AT_REST=True
DATA_ENCRYPTION_IN_TRANSIT=True

# =============================================================================
# NOTIFICATION SETTINGS
# =============================================================================
CRITICAL_VALUE_ALERT_EMAIL=True
CRITICAL_VALUE_ALERT_SMS=False
DAILY_SUMMARY_EMAIL=True
SYSTEM_ALERT_EMAIL=True
MAINTENANCE_NOTIFICATION_EMAIL=True

# =============================================================================
# WORKFLOW SETTINGS
# =============================================================================
AUTO_VALIDATION_ENABLED=True
AUTO_APPROVAL_ENABLED=False
CRITICAL_VALUE_REVIEW_REQUIRED=True
ABNORMAL_RESULT_REVIEW_REQUIRED=True
QC_FAILURE_ALERT=True

# =============================================================================
# LDT PROCESSING SETTINGS
# =============================================================================
LDT_MAX_RETRIES=3
LDT_RETRY_DELAY_SECONDS=60
LDT_PROCESSING_TIMEOUT_SECONDS=300
LDT_BATCH_SIZE=100
LDT_ERROR_ALERT_THRESHOLD=10

# =============================================================================
# REPORTING SETTINGS
# =============================================================================
REPORT_GENERATION_TIMEOUT_SECONDS=300
REPORT_TEMPLATE_PATH=/app/reports/templates
REPORT_OUTPUT_PATH=/app/reports/output
REPORT_ARCHIVE_PATH=/app/reports/archive
REPORT_RETENTION_DAYS=365

# =============================================================================
# ANALYTICS SETTINGS
# =============================================================================
ANALYTICS_ENABLED=True
ANALYTICS_DATA_RETENTION_DAYS=1095  # 3 years
ANALYTICS_BATCH_SIZE=1000
ANALYTICS_PROCESSING_INTERVAL_MINUTES=15

# =============================================================================
# MAINTENANCE SETTINGS
# =============================================================================
MAINTENANCE_MODE_ENABLED=False
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
MAINTENANCE_START_TIME=
MAINTENANCE_END_TIME=
MAINTENANCE_NOTIFICATION_EMAILS=admin@your-domain.com,tech@your-domain.com

# =============================================================================
# SCALING SETTINGS
# =============================================================================
MAX_CONCURRENT_USERS=1000
MAX_CONCURRENT_API_REQUESTS=500
MAX_FILE_UPLOAD_SIZE_MB=50
MAX_DATABASE_CONNECTIONS=200
MAX_REDIS_CONNECTIONS=100

# =============================================================================
# HEALTH CHECK SETTINGS
# =============================================================================
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=10
HEALTH_CHECK_FAILURE_THRESHOLD=3
HEALTH_CHECK_SUCCESS_THRESHOLD=2

# =============================================================================
# METRICS SETTINGS
# =============================================================================
METRICS_COLLECTION_ENABLED=True
METRICS_RETENTION_DAYS=30
METRICS_SCRAPE_INTERVAL_SECONDS=15
METRICS_EVALUATION_INTERVAL_SECONDS=15

# =============================================================================
# ALERTING RULES
# =============================================================================
ALERT_CRITICAL_VALUE_IMMEDIATE=True
ALERT_ABNORMAL_VALUE_DAILY=True
ALERT_SYSTEM_ERROR_IMMEDIATE=True
ALERT_PERFORMANCE_DEGRADATION_HOURLY=True
ALERT_DISK_SPACE_LOW_DAILY=True
ALERT_MEMORY_USAGE_HIGH_HOURLY=True
ALERT_CPU_USAGE_HIGH_HOURLY=True

# =============================================================================
# NETWORK SETTINGS
# =============================================================================
INTERNAL_NETWORK_CIDR=172.20.0.0/16
EXTERNAL_ACCESS_IP_RANGES=your-office-ip-range
VPN_REQUIRED_FOR_EXTERNAL_ACCESS=True
RATE_LIMITING_ENABLED=True
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST_SIZE=100

# =============================================================================
# SSL/TLS SETTINGS
# =============================================================================
SSL_CERTIFICATE_PATH=/etc/nginx/ssl/cert.pem
SSL_PRIVATE_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_CERTIFICATE_CHAIN_PATH=/etc/nginx/ssl/chain.pem
SSL_PROTOCOLS=TLSv1.2 TLSv1.3
SSL_CIPHERS=ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384
SSL_SESSION_CACHE_SIZE=10m
SSL_SESSION_TIMEOUT=10m

# =============================================================================
# FIREWALL SETTINGS
# =============================================================================
FIREWALL_ENABLED=True
ALLOWED_INBOUND_PORTS=80,443,22
ALLOWED_OUTBOUND_PORTS=53,80,443,587,993
BLOCKED_IP_RANGES=
ALLOWED_IP_RANGES=

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================
BACKUP_ENCRYPTION_ENABLED=True
BACKUP_COMPRESSION_ENABLED=True
BACKUP_VERIFICATION_ENABLED=True
BACKUP_NOTIFICATION_EMAIL=True
RECOVERY_POINT_OBJECTIVE_MINUTES=15
RECOVERY_TIME_OBJECTIVE_HOURS=4

# =============================================================================
# DISASTER RECOVERY
# =============================================================================
DR_SITE_ENABLED=False
DR_SITE_URL=
DR_SITE_API_KEY=
DR_SYNC_INTERVAL_MINUTES=60
DR_FAILOVER_AUTOMATIC=False
DR_FAILOVER_NOTIFICATION_EMAIL=True

# =============================================================================
# COMPLIANCE REPORTING
# =============================================================================
COMPLIANCE_REPORTING_ENABLED=True
COMPLIANCE_REPORT_SCHEDULE=0 0 1 * *  # Monthly on 1st
COMPLIANCE_REPORT_RETENTION_YEARS=7
COMPLIANCE_AUDIT_TRAIL_ENABLED=True
COMPLIANCE_DATA_EXPORT_ENABLED=True
COMPLIANCE_DATA_DELETION_ENABLED=False

# =============================================================================
# USER MANAGEMENT
# =============================================================================
USER_SESSION_TIMEOUT_MINUTES=480  # 8 hours
USER_PASSWORD_EXPIRY_DAYS=90
USER_PASSWORD_HISTORY_COUNT=5
USER_ACCOUNT_LOCKOUT_THRESHOLD=5
USER_ACCOUNT_LOCKOUT_DURATION_MINUTES=30
USER_MFA_REQUIRED=True
USER_SSO_ENABLED=False

# =============================================================================
# API SECURITY
# =============================================================================
API_RATE_LIMITING_ENABLED=True
API_AUTHENTICATION_REQUIRED=True
API_VERSIONING_ENABLED=True
API_DOCUMENTATION_ENABLED=True
API_LOGGING_ENABLED=True
API_MONITORING_ENABLED=True

# =============================================================================
# DATA PRIVACY
# =============================================================================
DATA_ANONYMIZATION_ENABLED=True
DATA_PSEUDONYMIZATION_ENABLED=True
DATA_ENCRYPTION_ALGORITHM=AES-256
DATA_ENCRYPTION_KEY_ROTATION_DAYS=90
DATA_ACCESS_LOGGING_ENABLED=True
DATA_RETENTION_POLICY_ENFORCED=True

# =============================================================================
# SYSTEM MONITORING
# =============================================================================
SYSTEM_MONITORING_ENABLED=True
SYSTEM_ALERTING_ENABLED=True
SYSTEM_METRICS_COLLECTION=True
SYSTEM_LOG_AGGREGATION=True
SYSTEM_PERFORMANCE_MONITORING=True
SYSTEM_CAPACITY_PLANNING=True

# =============================================================================
# INTEGRATION MONITORING
# =============================================================================
INTEGRATION_HEALTH_CHECK_ENABLED=True
INTEGRATION_ERROR_ALERTING=True
INTEGRATION_PERFORMANCE_MONITORING=True
INTEGRATION_AVAILABILITY_MONITORING=True
INTEGRATION_LATENCY_MONITORING=True
INTEGRATION_THROUGHPUT_MONITORING=True

# =============================================================================
# BUSINESS INTELLIGENCE
# =============================================================================
BI_ENABLED=True
BI_DATA_WAREHOUSE_ENABLED=True
BI_REPORTING_ENABLED=True
BI_DASHBOARD_ENABLED=True
BI_DATA_EXPORT_ENABLED=True
BI_SCHEDULED_REPORTS_ENABLED=True

# =============================================================================
# MOBILE APPLICATION
# =============================================================================
MOBILE_APP_ENABLED=False
MOBILE_APP_API_ENDPOINT=
MOBILE_APP_PUSH_NOTIFICATIONS=False
MOBILE_APP_OFFLINE_MODE=False
MOBILE_APP_DATA_SYNC_ENABLED=False

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================
EXTERNAL_LAB_INTERFACE_ENABLED=False
EXTERNAL_LAB_API_ENDPOINT=
EXTERNAL_LAB_API_KEY=
REFERENCE_LAB_INTERFACE_ENABLED=False
REFERENCE_LAB_API_ENDPOINT=
REFERENCE_LAB_API_KEY=

# =============================================================================
# DEVELOPMENT AND TESTING
# =============================================================================
DEVELOPMENT_MODE_ENABLED=False
TESTING_MODE_ENABLED=False
MOCK_DATA_ENABLED=False
DEBUG_TOOLBAR_ENABLED=False
PROFILING_ENABLED=False
PERFORMANCE_TESTING_ENABLED=False

# =============================================================================
# DEPLOYMENT SETTINGS
# =============================================================================
DEPLOYMENT_ENVIRONMENT=production
DEPLOYMENT_REGION=us-east-1
DEPLOYMENT_VERSION=${APP_VERSION}
DEPLOYMENT_TIMESTAMP=
DEPLOYMENT_ROLLBACK_ENABLED=True
DEPLOYMENT_NOTIFICATION_EMAIL=True

# =============================================================================
# MAINTENANCE WINDOWS
# =============================================================================
MAINTENANCE_WINDOW_START=02:00
MAINTENANCE_WINDOW_END=04:00
MAINTENANCE_WINDOW_TIMEZONE=UTC
MAINTENANCE_WINDOW_NOTIFICATION_DAYS=7
MAINTENANCE_WINDOW_AUTO_ENABLED=False

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
DATABASE_CONNECTION_POOL_SIZE=20
REDIS_CONNECTION_POOL_SIZE=10
CELERY_WORKER_PREFETCH_MULTIPLIER=4
CELERY_TASK_ACKS_LATE=True
CELERY_TASK_REJECT_ON_WORKER_LOST=True
DJANGO_CACHE_TIMEOUT=300
DJANGO_SESSION_ENGINE=django.contrib.sessions.backends.cache

# =============================================================================
# SECURITY HEADERS
# =============================================================================
SECURITY_HEADERS_ENABLED=True
CONTENT_SECURITY_POLICY_ENABLED=True
X_FRAME_OPTIONS=SAMEORIGIN
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin
PERMISSIONS_POLICY_ENABLED=True

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_FORMAT=json
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_DJANGO=INFO
LOG_LEVEL_CELERY=INFO
LOG_LEVEL_MIRTH=INFO
LOG_LEVEL_ELASTICSEARCH=INFO
LOG_LEVEL_POSTGRES=INFO
LOG_LEVEL_REDIS=INFO

# =============================================================================
# ALERTING CHANNELS
# =============================================================================
ALERT_EMAIL_ENABLED=True
ALERT_SMS_ENABLED=False
ALERT_SLACK_ENABLED=False
ALERT_PAGERDUTY_ENABLED=False
ALERT_WEBHOOK_ENABLED=False
ALERT_ESCALATION_ENABLED=True

# =============================================================================
# ESCALATION RULES
# =============================================================================
ESCALATION_LEVEL_1_MINUTES=5
ESCALATION_LEVEL_2_MINUTES=15
ESCALATION_LEVEL_3_MINUTES=30
ESCALATION_LEVEL_4_MINUTES=60
ESCALATION_LEVEL_5_MINUTES=120
ESCALATION_LEVEL_1_EMAILS=oncall@your-domain.com
ESCALATION_LEVEL_2_EMAILS=team-lead@your-domain.com
ESCALATION_LEVEL_3_EMAILS=manager@your-domain.com
ESCALATION_LEVEL_4_EMAILS=director@your-domain.com
ESCALATION_LEVEL_5_EMAILS=cto@your-domain.com